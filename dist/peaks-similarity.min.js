// peaks-similarity@v1.3.0, MIT licensed. https://github.com/cheminfo-js/peaks-similarity
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof global?r=global:"undefined"!=typeof self&&(r=self),r.peaksSimilarity=t()}}(function(){return function t(r,n,e){function i(o,f){if(!n[o]){if(!r[o]){var u="function"==typeof require&&require;if(!f&&u)return u(o,!0);if(a)return a(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var h=n[o]={exports:{}};r[o][0].call(h.exports,function(t){var n=r[o][1][t];return i(n?n:t)},h,h.exports,t,r,n,e)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<e.length;o++)i(e[o]);return i}({1:[function(t,r){"use strict";function n(t,r,n){var e=[],i=0;n/=2;for(var a=0,o=0;o<t.length;o++){for(;i<r.length&&t[o][0]>r[i][0]+n;)i++;i<r.length&&t[o][0]>r[i][0]-n&&(e[a++]=t[o])}return e}function e(t,r){var n,e,i,a,o=t[0][0],f=t[0][1],u=t[1][0],s=t[1][1],h=r[0][0],d=r[0][1],c=r[1][0],v=r[1][1];n=u-o,e=s-f,i=c-h,a=v-d;var l,m;return l=(-e*(o-h)+n*(f-d))/(-i*e+n*a),m=(i*(f-d)-a*(o-h))/(-i*e+n*a),l>=0&&1>=l&&m>=0&&1>=m?{x:o+m*n,y:f+m*e}:null}function i(t){for(var r=0,n=Number.MAX_VALUE,e=Number.MIN_VALUE,i=0;i<t.length;i++)r+=t[i][1],t[i][1]<n&&(n=t[i][1]),t[i][1]>e&&(e=t[i][1]);if(0!=r)for(var i=0;i<t.length;i++)t[i][1]/=r;return{sum:r,min:n,max:e}}function a(t,r,e,a,f){if(!Array.isArray(t)||!Array.isArray(r))return{info:void 0,data:void 0};var u=o(t,a,f),s=o(r,a,f),h=n(u,s,e),d=n(s,u,e),c=i(h),v=i(d);return{info1:c,info2:v,data1:h,data2:d}}function o(t,r,n){for(var e=[],i=0,a=0;a<t.length;a++)(!r||t[a][0]>=r)&&(!n||t[a][0]<=n)&&(e[i++]=[t[a][0],t[a][1]]);return e}function f(t,r,n){if(!Array.isArray(t))return{info:void 0,data:void 0};var e=o(t,r,n),a=i(e);return{info:a,data:e}}function u(t){for(var r=0,n=0;n<t.length;n++)r+=Math.abs(t[n][1]);return 1-r}r.exports=function(t){function r(r){t=r||{},q=t.common||q||!1,void 0==t.widthBottom&&(t.widthBottom==A||2),void 0==t.widthTop&&(t.widthTop==w||1),v(t.widthBottom,t.widthTop),l(t.from||M,t.to||b)}function i(t){if(O=y(t),q){var r=a(O,U,A,M,b);E=r.data1,I=r.info1,T=r.data2,N=r.info2}else{var n=f(O,M,b);E=n.data,I=n.info}}function o(t){if(U=y(t),q){var r=a(O,U,A,M,b);E=r.data1,I=r.info1,T=r.data2,N=r.info2}else{var n=f(U,M,b);T=n.data,N=n.info}}function s(){return E}function h(){return T}function d(){return I}function c(){return N}function v(t,r){if(console.log(t,r),w=r,A=t,B=(A-w)/2,w>A)throw"widthBottom has to be larger than widthTop"}function l(t,r){if(t!==M||r!==b)if(M=t,b=r,q){var n=a(O,U,withBottom,M,b);E=n.data1,I=n.info1,T=n.data2,N=n.info2}else{var e=f(O,M,b);E=e.data,I=e.info;var e=f(U,M,b);T=e.data,N=e.info}}function m(t,r,n,e){if(0===r||0===e)return 0;var i=2*Math.abs(t-n);if(i>A)return 0;if(w>=i)return Math.min(r,e);var a=Math.max(r,e)*(A-i)/(A-w);return Math.min(r,e,a)}function p(t,r,n,i){var a=2/(w+A);if(0===r||0===i)return 0;if(t===n)return Math.min(r,i);var o=Math.abs(t-n);if(o>=A)return 0;if(r===i)return w>=o?((w+A)/2-o)*r*a:A>=o?(A-o)*r/2*(o-w)/(A-w)*a:0;var f=Math.min(r,i),u=Math.max(r,i),s=[[[0,0],[B,f]],[[B,f],[B+w,f]],[[w+B,f],[A,0]]];if(t>n&&r>i||n>t&&i>r)var h=[[o,0],[o+B,u]];else var h=[[o+B,u],[o,0]];for(var d=0;3>d;d++){var c=e(s[d],h);if(c)switch(d){case 0:return f-o*c.y/2*a;case 1:return(B*f/(2*u)*f+(w+B-c.x)*f+B*f/2)*a;case 2:return(A-o)*c.y/2*a}}return 0/0}function g(){for(var r=[],n=0;n<T.length;n++)r.push([T[n][0],T[n][1]]);for(var e=[],n=0;n<E.length;n++)e.push([E[n][0],E[n][1]]);for(var i=0,a=0,o=0;i<e.length;){var f=e[i][0]-T[a][0];if(Math.abs(f)<A){if(t.trapezoid)var u=p(e[i][0],e[i][1],r[a][0],r[a][1],w,A);else var u=m(e[i][0],e[i][1],r[a][0],r[a][1],w,A);e[i][1]-=u,r[a][1]-=u,a<T.length-1?a++:(i++,a=o)}else f>0&&a<T.length-1?(a++,o=a):(i++,a=o)}return r}function y(t){if(Array.isArray(t)&&Array.isArray(t[0])&&2===t[0].length)return t;for(var r=t[0],n=t[1],e=[],i=0;i<r.length;i++)e.push([r[i],n[i]]);return e}function x(t,r){t&&i(t),r&&o(r);var n={};return n.diff=g(),n.extract1=s(),n.extract2=h(),n.extractInfo1=d(),n.extractInfo2=c(),n.similarity=u(n.diff),n}var w,A,M,b,E,T,B,I,N,q;r(t);var O=[],U=[];this.setPeaks1=i,this.setPeaks2=o,this.getExtract1=s,this.getExtract2=h,this.getExtractInfo1=d,this.getExtractInfo2=c,this.setFromTo=l,this.setOptions=r,this.setTrapezoid=v,this.getSimilarity=x,this.getCommonArray=n}},{}]},{},[1])(1)});
//# sourceMappingURL=peaks-similarity.min.js.map