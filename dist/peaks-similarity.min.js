// peaks-similarity@v1.2.1, MIT licensed. https://github.com/cheminfo-js/peaks-similarity
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof global?r=global:"undefined"!=typeof self&&(r=self),r.peaksSimilarity=t()}}(function(){return function t(r,n,e){function i(f,o){if(!n[f]){if(!r[f]){var u="function"==typeof require&&require;if(!o&&u)return u(f,!0);if(a)return a(f,!0);var s=new Error("Cannot find module '"+f+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[f]={exports:{}};r[f][0].call(c.exports,function(t){var n=r[f][1][t];return i(n?n:t)},c,c.exports,t,r,n,e)}return n[f].exports}for(var a="function"==typeof require&&require,f=0;f<e.length;f++)i(e[f]);return i}({1:[function(t,r){"use strict";function n(t,r){var n,e,i,a,f=t[0][0],o=t[0][1],u=t[1][0],s=t[1][1],c=r[0][0],h=r[0][1],v=r[1][0],d=r[1][1];n=u-f,e=s-o,i=v-c,a=d-h;var l,p;return l=(-e*(f-c)+n*(o-h))/(-i*e+n*a),p=(i*(o-h)-a*(f-c))/(-i*e+n*a),l>=0&&1>=l&&p>=0&&1>=p?{x:f+p*n,y:o+p*e}:null}function e(t){for(var r=0,n=Number.MAX_VALUE,e=Number.MIN_VALUE,i=0;i<t.length;i++)r+=t[i][1],t[i][1]<n&&(n=t[i][1]),t[i][1]>e&&(e=t[i][1]);if(0!=r)for(var i=0;i<t.length;i++)t[i][1]/=r;return{sum:r,min:n,max:e}}function i(t,r,n){if(!Array.isArray(t))return{info:void 0,data:void 0};for(var i=[],a=0,f=0;f<t.length;f++)(!r||t[f][0]>=r)&&(!n||t[f][0]<=n)&&(i[a++]=[t[f][0],t[f][1]]);var o=e(i);return{info:o,data:i}}function a(t){for(var r=0,n=0;n<t.length;n++)r+=Math.abs(t[n][1]);return 1-r}r.exports=function(t){function r(r){t=r||{},h(t.widthBottom||y||2,t.widthTop||x||1),v(t.from||M,t.to||w)}function e(t){T=m(t);var r=i(T,M,w);b=r.data,I=r.info}function f(t){q=m(t);var r=i(q,M,w);A=r.data,N=r.info}function o(){return b}function u(){return A}function s(){return I}function c(){return N}function h(t,r){if(x=r,y=t,E=(y-x)/2,x>y)throw"widthBottom has to be larger than widthTop"}function v(t,r){if(t!==M||r!==w){M=t,w=r;var n=i(T,M,w);b=n.data,I=n.info;var n=i(q,M,w);A=n.data,N=n.info}}function d(t,r,n,e){if(0===r||0===e)return 0;var i=2*Math.abs(t-n);if(i>y)return 0;if(x>=i)return Math.min(r,e);var a=Math.max(r,e)*(y-i)/(y-x);return Math.min(r,e,a)}function l(t,r,e,i){var a=2/(x+y);if(0===r||0===i)return 0;if(t===e)return Math.min(r,i);var f=Math.abs(t-e);if(f>=y)return 0;if(r===i)return x>=f?((x+y)/2-f)*r*a:y>=f?(y-f)*r/2*(f-x)/(y-x)*a:0;var o=Math.min(r,i),u=Math.max(r,i),s=[[[0,0],[E,o]],[[E,o],[E+x,o]],[[x+E,o],[y,0]]];if(t>e&&r>i||e>t&&i>r)var c=[[f,0],[f+E,u]];else var c=[[f+E,u],[f,0]];for(var h=0;3>h;h++){var v=n(s[h],c);if(v)switch(h){case 0:return o-f*v.y/2*a;case 1:return(E*o/(2*u)*o+(x+E-v.x)*o+E*o/2)*a;case 2:return(y-f)*v.y/2*a}}return 0/0}function p(){for(var r=[],n=0;n<A.length;n++)r.push([A[n][0],A[n][1]]);for(var e=[],n=0;n<b.length;n++)e.push([b[n][0],b[n][1]]);for(var i=0,a=0,f=0;i<e.length;){var o=e[i][0]-A[a][0];if(Math.abs(o)<y){if(t.trapezoid)var u=l(e[i][0],e[i][1],r[a][0],r[a][1],x,y);else var u=d(e[i][0],e[i][1],r[a][0],r[a][1],x,y);e[i][1]-=u,r[a][1]-=u,a<A.length-1?a++:(i++,a=f)}else o>0&&a<A.length-1?(a++,f=a):(i++,a=f)}return r}function m(t){if(Array.isArray(t)&&Array.isArray(t[0])&&2===t[0].length)return t;for(var r=t[0],n=t[1],e=[],i=0;i<r.length;i++)e.push([r[i],n[i]]);return e}function g(t,r){t&&e(t),r&&f(r);var n={};return n.diff=p(),n.extract1=o(),n.extract2=u(),n.extractInfo1=s(),n.extractInfo2=c(),n.similarity=a(n.diff),n}var x,y,M,w,b,A,E,I,N;r(t);var T=[],q=[];this.setPeaks1=e,this.setPeaks2=f,this.getExtract1=o,this.getExtract2=u,this.getExtractInfo1=s,this.getExtractInfo2=c,this.setFromTo=v,this.setOptions=r,this.setTrapezoid=h,this.getSimilarity=g}},{}]},{},[1])(1)});
//# sourceMappingURL=peaks-similarity.min.js.map