// peaks-similarity@v1.1.0, MIT licensed. https://github.com/cheminfo-js/peaks-similarity
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof global?r=global:"undefined"!=typeof self&&(r=self),r.peaksSimilarity=t()}}(function(){return function t(r,n,e){function i(a,f){if(!n[a]){if(!r[a]){var u="function"==typeof require&&require;if(!f&&u)return u(a,!0);if(o)return o(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[a]={exports:{}};r[a][0].call(c.exports,function(t){var n=r[a][1][t];return i(n?n:t)},c,c.exports,t,r,n,e)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<e.length;a++)i(e[a]);return i}({1:[function(t,r){"use strict";function n(t,r){var n,e,i,o,a=t[0][0],f=t[0][1],u=t[1][0],s=t[1][1],c=r[0][0],h=r[0][1],v=r[1][0],d=r[1][1];n=u-a,e=s-f,i=v-c,o=d-h;var l,p;return l=(-e*(a-c)+n*(f-h))/(-i*e+n*o),p=(i*(f-h)-o*(a-c))/(-i*e+n*o),l>=0&&1>=l&&p>=0&&1>=p?{x:a+p*n,y:f+p*e}:null}function e(t){for(var r=0,n=Number.MAX_VALUE,e=Number.MIN_VALUE,i=0;i<t.length;i++)r+=t[i][1],t[i][1]<n&&(n=t[i][1]),t[i][1]>e&&(e=t[i][1]);if(0!=r)for(var i=0;i<t.length;i++)t[i][1]/=r;return{sum:r,min:n,max:e}}function i(t,r,n){if(!Array.isArray(t))return{info:void 0,data:void 0};for(var i=[],o=0,a=0;a<t.length;a++)(!r||t[a][0]>=r)&&(!n||t[a][0]<=n)&&(i[o++]=[t[a][0],t[a][1]]);var f=e(i);return{info:f,data:i}}function o(t){for(var r=0,n=0;n<t.length;n++)r+=Math.abs(t[n][1]);return 1-r}r.exports=function(t){function r(r){t=r||{},h(t.widthBottom||m||2,t.widthTop||y||1),v(t.from||x,t.to||w)}function e(t){N=p(t);var r=i(N,x,w);b=r.data,E=r.info}function a(t){T=p(t);var r=i(T,x,w);A=r.data,I=r.info}function f(){return b}function u(){return A}function s(){return E}function c(){return I}function h(t,r){if(y=r,m=t,M=(m-y)/2,y>m)throw"widthBottom has to be larger than widthTop"}function v(t,r){if(t!==x||r!==w){x=t,w=r;var n=i(N,x,w);b=n.data,E=n.info;var n=i(T,x,w);A=n.data,I=n.info}}function d(t,r,e,i){var o=2/(y+m);if(0===r||0===i)return 0;if(t===e)return Math.min(r,i);var a=Math.abs(t-e);if(a>=m)return 0;if(r===i)return y>=a?((y+m)/2-a)*r*o:m>=a?(m-a)*r/2*(a-y)/(m-y)*o:0;var f=Math.min(r,i),u=Math.max(r,i),s=[[[0,0],[M,f]],[[M,f],[M+y,f]],[[y+M,f],[m,0]]];if(t>e&&r>i||e>t&&i>r)var c=[[a,0],[a+M,u]];else var c=[[a+M,u],[a,0]];for(var h=0;3>h;h++){var v=n(s[h],c);if(v)switch(h){case 0:return f-a*v.y/2*o;case 1:return(M*f/(2*u)*f+(y+M-v.x)*f+M*f/2)*o;case 2:return(m-a)*v.y/2*o}}return 0/0}function l(){for(var t=[],r=0;r<A.length;r++)t.push([A[r][0],A[r][1]]);for(var n=[],r=0;r<b.length;r++)n.push([b[r][0],b[r][1]]);for(var e=0,i=0,o=0;e<n.length;){var a=n[e][0]-A[i][0];if(Math.abs(a)<m){var f=d(n[e][0],n[e][1],t[i][0],t[i][1],y,m);n[e][1]-=f,t[i][1]-=f,i<A.length-1?i++:(e++,i=o)}else a>0&&i<A.length-1?(i++,o=i):(e++,i=o)}return t}function p(t){if(Array.isArray(t)&&Array.isArray(t[0])&&2===t[0].length)return t;for(var r=t[0],n=t[1],e=[],i=0;i<r.length;i++)e.push([r[i],n[i]]);return e}function g(t,r){t&&e(t),r&&a(r);var n={};return n.diff=l(),n.extract1=f(),n.extract2=u(),n.extractInfo1=s(),n.extractInfo2=c(),n.similarity=o(n.diff),n}var y,m,x,w,b,A,M,E,I;r(t);var N=[],T=[];this.setPeaks1=e,this.setPeaks2=a,this.getExtract1=f,this.getExtract2=u,this.getExtractInfo1=s,this.getExtractInfo2=c,this.setFromTo=v,this.setOptions=r,this.setTrapezoid=h,this.getSimilarity=g}},{}]},{},[1])(1)});
//# sourceMappingURL=peaks-similarity.min.js.map